<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Paiement – Baba Colis</title>
<style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:0; }
    .card { background:white; padding:20px; border-radius:10px; max-width:600px; margin:20px auto; }
    h2 { margin-top:0; }
    button { width:100%; padding:15px; background:#008000; color:white; border:none; border-radius:8px; font-size:18px; cursor:pointer; }
    button:hover { background:#006600; }
    .error { color:red; font-weight:bold; }
</style>
</head>
<body>

<div class="card">
    <h2>Récapitulatif du colis</h2>

    <div id="error" class="error"></div>

    <p><b>Montant :</b> <span id="prix"></span> CFA</p>
    <p><b>De :</b> <span id="depart"></span></p>
    <p><b>À :</b> <span id="arrivee"></span></p>
    <p><b>Poids :</b> <span id="poids"></span> kg</p>
    <p><b>Dimensions :</b> 
        <span id="longueur"></span> x 
        <span id="largeur"></span> x 
        <span id="hauteur"></span> cm
    </p>

    <form action="https://babacolis.wuaze.com/paytech.php" method="POST" id="paymentForm">
        <input type="hidden" name="prix">
        <input type="hidden" name="depart">
        <input type="hidden" name="arrivee">
        <input type="hidden" name="poids">
        <input type="hidden" name="longueur">
        <input type="hidden" name="largeur">
        <input type="hidden" name="hauteur">
        <input type="hidden" name="dest_nom" value="">
        <input type="hidden" name="dest_prenom" value="">

        <button type="submit">Payer avec PayTech</button>
    </form>
</div>

<script>
const params = new URLSearchParams(window.location.search);

const prix = parseInt(params.get("prix"));
const depart = params.get("depart");
const arrivee = params.get("arrivee");
const poids = params.get("poids");
const longueur = params.get("longueur");
const largeur = params.get("largeur");
const hauteur = params.get("hauteur");

// Vérification
if (!prix || prix < 100) {
    document.getElementById("error").textContent = 
        "Erreur : montant invalide. Veuillez recommencer.";
    document.getElementById("paymentForm").style.display = "none";
} else {
    document.getElementById("prix").textContent = prix;
    document.getElementById("depart").textContent = depart;
    document.getElementById("arrivee").textContent = arrivee;
    document.getElementById("poids").textContent = poids;
    document.getElementById("longueur").textContent = longueur;
    document.getElementById("largeur").textContent = largeur;
    document.getElementById("hauteur").textContent = hauteur;

    document.querySelector('input[name="prix"]').value = prix;
    document.querySelector('input[name="depart"]').value = depart;
    document.querySelector('input[name="arrivee"]').value = arrivee;
    document.querySelector('input[name="poids"]').value = poids;
    document.querySelector('input[name="longueur"]').value = longueur;
    document.querySelector('input[name="largeur"]').value = largeur;
    document.querySelector('input[name="hauteur"]').value = hauteur;
}
</script>

</body>
</html>
