<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Envoyer un colis – Baba Colis</title>

<link rel="manifest" href="manifest.json">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

<style>
    body {
        margin:0;
        padding:0;
        font-family:'Poppins', sans-serif;
        background:#f5f5f5;
    }

    header {
        background:#008000;
        padding:15px;
        text-align:center;
        color:white;
        font-size:22px;
        font-weight:600;
    }

    nav {
        display:flex;
        justify-content:center;
        gap:20px;
        margin-top:10px;
        flex-wrap:wrap;
    }

    nav a {
        color:white;
        text-decoration:none;
        font-weight:600;
    }

    .card {
        background:white;
        padding:20px;
        border-radius:12px;
        box-shadow:0 4px 15px rgba(0,0,0,0.1);
        margin:20px auto;
        max-width:900px;
    }

    label {
        font-weight:600;
        margin-top:15px;
        display:block;
    }

    input, select {
        width:100%;
        padding:15px;
        border-radius:10px;
        border:1px solid #ccc;
        margin-top:8px;
        font-size:16px;
    }

    button {
        width:100%;
        padding:15px;
        font-size:18px;
        border:none;
        border-radius:10px;
        background:#008000;
        color:white;
        font-weight:bold;
        cursor:pointer;
        margin-top:20px;
    }

    button:hover { background:#006600; }

    footer {
        background:#004d00;
        color:white;
        padding:20px;
        text-align:center;
        margin-top:40px;
    }
</style>
</head>

<body>

<header>
    Envoyer un colis
    <nav>
        <a href="index.html">Accueil</a>
        <a href="suivre.html">Suivre un colis</a>
        <a href="envoyer.html">Envoyer un colis</a>
        <a href="pointsrelais.html">Points relais</a>
        <a href="contact.html">Contact</a>
    </nav>
</header>

<div class="card">
    <h2>Informations du colis</h2>

    <label>Ville de départ</label>
    <select id="depart">
        <option>Saint-Louis</option>
        <option>Louga</option>
        <option>Guéoul</option>
        <option>Kébémer</option>
        <option>Mékhé</option>
        <option>Tivaouane</option>
        <option>Thiès</option>
        <option>Dakar</option>
    </select>

    <label>Ville d’arrivée</label>
    <select id="arrivee">
        <option>Saint-Louis</option>
        <option>Louga</option>
        <option>Guéoul</option>
        <option>Kébémer</option>
        <option>Mékhé</option>
        <option>Tivaouane</option>
        <option>Thiès</option>
        <option>Dakar</option>
    </select>

    <label>Poids du colis (kg)</label>
    <input type="number" id="poids" placeholder="Ex : 2">

    <label>Option de livraison</label>
    <select id="option">
        <option value="normal">Livraison normale</option>
        <option value="express">Express (+1500 CFA)</option>
    </select>

    <button onclick="calculer()">Calculer le prix</button>

    <h3 id="resultat" style="margin-top:20px;"></h3>

    <button id="btnPaiement" style="display:none; background:#004d00;">
        Payer maintenant
    </button>
</div>

<footer>
    © 2024 Baba Colis – Tous droits réservés  
</footer>

<script>
function calculer() {
    let depart = document.getElementById("depart").value;
    let arrivee = document.getElementById("arrivee").value;
    let poids = Number(document.getElementById("poids").value);
    let option = document.getElementById("option").value;

    if (poids <= 0) {
        alert("Veuillez entrer un poids valide.");
        return;
    }

    // Liste des villes dans l'ordre réel du trajet
    const ordre = [
        "Saint-Louis",
        "Louga",
        "Guéoul",
        "Kébémer",
        "Mékhé",
        "Tivaouane",
        "Thiès",
        "Dakar"
    ];

    // Distance en segments
    let distance = Math.abs(ordre.indexOf(depart) - ordre.indexOf(arrivee));
    let prixDistance = distance * 1500;

    // Prix du poids
    let prixPoids = 500; // < 1kg = 500 CFA
    if (poids > 1) {
        prixPoids = 500 + (Math.ceil(poids - 1) * 500);
    }

    // Option express
    let prixExpress = (option === "express") ? 1500 : 0;

    // Total
    let prix = prixDistance + prixPoids + prixExpress;

    document.getElementById("resultat").innerHTML =
        "Prix total : <b>" + prix + " CFA</b>";

    const btn = document.getElementById("btnPaiement");
    btn.style.display = "block";
    btn.onclick = function() {
        window.location.href = "paiement.html?prix=" + prix;
    };
}
</script>

<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
}
</script>

</body>
</html>
