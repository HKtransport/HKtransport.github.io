<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Envoyer un colis ‚Äì Baba Colis</title>

<style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:0; }
    .card { background:white; padding:20px; border-radius:10px; max-width:600px; margin:20px auto; }
    label { font-weight:bold; margin-top:15px; display:block; }
    select, input { width:100%; padding:12px; margin-top:5px; border-radius:8px; border:1px solid #ccc; }
    button { width:100%; padding:15px; background:#008000; color:white; border:none; border-radius:8px; font-size:18px; margin-top:20px; cursor:pointer; }
    button:hover { background:#006600; }
</style>
</head>

<body>

<div class="card">
    <h2>Envoyer un colis</h2>

    <!-- üîµ EXP√âDITEUR -->
    <h3>Informations de l'exp√©diteur</h3>

    <label>Nom</label>
    <input type="text" id="exp_nom" placeholder="Nom de l'exp√©diteur">

    <label>Pr√©nom</label>
    <input type="text" id="exp_prenom" placeholder="Pr√©nom de l'exp√©diteur">

    <label>T√©l√©phone</label>
    <input type="tel" id="exp_tel" placeholder="Ex : 77 123 45 67">

    <hr>

    <!-- üîµ DESTINATAIRE -->
    <h3>Informations du destinataire</h3>

    <label>Nom</label>
    <input type="text" id="dest_nom" placeholder="Nom du destinataire">

    <label>Pr√©nom</label>
    <input type="text" id="dest_prenom" placeholder="Pr√©nom du destinataire">

    <label>T√©l√©phone</label>
    <input type="tel" id="dest_tel" placeholder="Ex : 78 987 65 43">

    <hr>

    <!-- üîµ COLIS -->
    <label>Ville de d√©part</label>
    <select id="depart">
        <option>Saint-Louis</option>
        <option>Louga</option>
        <option>Gu√©oul</option>
        <option>K√©b√©mer</option>
        <option>M√©kh√©</option>
        <option>Tivaouane</option>
        <option>Thi√®s</option>
        <option>Dakar</option>
    </select>

    <label>Ville d‚Äôarriv√©e</label>
    <select id="arrivee">
        <option>Saint-Louis</option>
        <option>Louga</option>
        <option>Gu√©oul</option>
        <option>K√©b√©mer</option>
        <option>M√©kh√©</option>
        <option>Tivaouane</option>
        <option>Thi√®s</option>
        <option>Dakar</option>
    </select>

    <label>Poids du colis (kg)</label>
    <input type="number" id="poids" placeholder="Ex : 2">

    <h3>Dimensions du colis</h3>

    <label>Longueur (cm)</label>
    <input type="number" id="longueur" placeholder="Ex : 40">

    <label>Largeur (cm)</label>
    <input type="number" id="largeur" placeholder="Ex : 30">

    <label>Hauteur (cm)</label>
    <input type="number" id="hauteur" placeholder="Ex : 20">

    <button onclick="calculer()">Calculer le prix</button>

    <h3 id="resultat"></h3>

    <button id="btnPaiement" type="button" style="display:none; background:#004d00;">
        Payer maintenant
    </button>
</div>

<script>
function calculer() {

    // üîµ EXP√âDITEUR
    let exp_nom = document.getElementById("exp_nom").value;
    let exp_prenom = document.getElementById("exp_prenom").value;
    let exp_tel = document.getElementById("exp_tel").value;

    // üîµ DESTINATAIRE
    let dest_nom = document.getElementById("dest_nom").value;
    let dest_prenom = document.getElementById("dest_prenom").value;
    let dest_tel = document.getElementById("dest_tel").value;

    // üîµ COLIS
    let depart = document.getElementById("depart").value;
    let arrivee = document.getElementById("arrivee").value;
    let poids = Number(document.getElementById("poids").value);

    let longueur = Number(document.getElementById("longueur").value);
    let largeur = Number(document.getElementById("largeur").value);
    let hauteur = Number(document.getElementById("hauteur").value);

    if (poids <= 0) {
        alert("Veuillez entrer un poids valide.");
        return;
    }

    if (longueur > 110 || largeur > 110 || hauteur > 110) {
        alert("Dimensions trop grandes. Maximum autoris√© : 110 cm.");
        return;
    }

    const ordre = [
        "Saint-Louis",
        "Louga",
        "Gu√©oul",
        "K√©b√©mer",
        "M√©kh√©",
        "Tivaouane",
        "Thi√®s",
        "Dakar"
    ];

    let distance = Math.abs(ordre.indexOf(depart) - ordre.indexOf(arrivee));

    let prixDistance = distance > 0 ? 1000 + (distance - 1) * 500 : 0;

    let prixPoids = poids > 1 ? 500 + (Math.ceil(poids - 1) * 500) : 500;

    let prixDimensions = 0;
    if (longueur > 30) prixDimensions += 350;
    if (largeur > 30) prixDimensions += 350;
    if (hauteur > 30) prixDimensions += 350;

    let prix = prixDistance + prixPoids + prixDimensions;

    document.getElementById("resultat").innerHTML =
        "Prix total : <b>" + prix + " CFA</b>";

    const btn = document.getElementById("btnPaiement");
    btn.style.display = "block";

    // üî• ENVOI COMPLET DES DONN√âES üî•
    btn.onclick = function() {
        const params = new URLSearchParams({
            prix: prix,
            depart: depart,
            arrivee: arrivee,
            poids: poids,
            longueur: longueur,
            largeur: largeur,
            hauteur: hauteur,

            exp_nom: exp_nom,
            exp_prenom: exp_prenom,
            exp_tel: exp_tel,

            dest_nom: dest_nom,
            dest_prenom: dest_prenom,
            dest_tel: dest_tel
        });

        window.location.href = "paiement.html?" + params.toString();
    };
}
</script>

</body>
</html>
