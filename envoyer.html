<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Envoyer un colis ‚Äì Baba Colis</title>

<style>
    body { font-family: Arial, sans-serif; background:#f5f5f5; margin:0; padding:0; }
    .card { background:white; padding:20px; border-radius:10px; max-width:600px; margin:20px auto; }
    label { font-weight:bold; margin-top:15px; display:block; }
    select, input { width:100%; padding:12px; margin-top:5px; border-radius:8px; border:1px solid #ccc; }
    button { width:100%; padding:15px; background:#008000; color:white; border:none; border-radius:8px; font-size:18px; margin-top:20px; cursor:pointer; }
    button:hover { background:#006600; }
</style>
</head>

<body>

<div class="card">
    <h2>Envoyer un colis</h2>

    <label>Ville de d√©part</label>
    <select id="depart">
        <option>Saint-Louis</option>
        <option>Louga</option>
        <option>Gu√©oul</option>
        <option>K√©b√©mer</option>
        <option>M√©kh√©</option>
        <option>Tivaouane</option>
        <option>Thi√®s</option>
        <option>Dakar</option>
    </select>

    <label>Ville d‚Äôarriv√©e</label>
    <select id="arrivee">
        <option>Saint-Louis</option>
        <option>Louga</option>
        <option>Gu√©oul</option>
        <option>K√©b√©mer</option>
        <option>M√©kh√©</option>
        <option>Tivaouane</option>
        <option>Thi√®s</option>
        <option>Dakar</option>
    </select>

    <label>Poids du colis (kg)</label>
    <input type="number" id="poids" placeholder="Ex : 2">

    <h3>Dimensions du colis</h3>

    <label>Longueur (cm)</label>
    <input type="number" id="longueur" placeholder="Ex : 40">

    <label>Largeur (cm)</label>
    <input type="number" id="largeur" placeholder="Ex : 30">

    <label>Hauteur (cm)</label>
    <input type="number" id="hauteur" placeholder="Ex : 20">

    <button onclick="calculer()">Calculer le prix</button>

    <h3 id="resultat"></h3>

    <button id="btnPaiement" style="display:none; background:#004d00;">
        Payer maintenant
    </button>
</div>

<script>
function calculer() {
    let depart = document.getElementById("depart").value;
    let arrivee = document.getElementById("arrivee").value;
    let poids = Number(document.getElementById("poids").value);

    let longueur = Number(document.getElementById("longueur").value);
    let largeur = Number(document.getElementById("largeur").value);
    let hauteur = Number(document.getElementById("hauteur").value);

    if (poids <= 0) {
        alert("Veuillez entrer un poids valide.");
        return;
    }

    if (longueur > 110 || largeur > 110 || hauteur > 110) {
        alert("Dimensions trop grandes. Maximum autoris√© : 110 cm.");
        return;
    }

    const ordre = [
        "Saint-Louis",
        "Louga",
        "Gu√©oul",
        "K√©b√©mer",
        "M√©kh√©",
        "Tivaouane",
        "Thi√®s",
        "Dakar"
    ];

    let distance = Math.abs(ordre.indexOf(depart) - ordre.indexOf(arrivee));

    let prixDistance = 0;
    if (distance > 0) {
        prixDistance = 1000 + (distance - 1) * 500;
    }

    let prixPoids = 500;
    if (poids > 1) {
        prixPoids = 500 + (Math.ceil(poids - 1) * 500);
    }

    let prixDimensions = 0;
    if (longueur > 30) prixDimensions += 350;
    if (largeur > 30) prixDimensions += 350;
    if (hauteur > 30) prixDimensions += 350;

    let prix = prixDistance + prixPoids + prixDimensions;

    document.getElementById("resultat").innerHTML =
        "Prix total : <b>" + prix + " CFA</b>";

    const btn = document.getElementById("btnPaiement");
    btn.style.display = "block";

    // üî• ENVOI COMPLET DES DONN√âES üî•
    btn.onclick = function() {
        const params = new URLSearchParams({
            prix: prix,
            depart: depart,
            arrivee: arrivee,
            poids: poids,
            longueur: longueur,
            largeur: largeur,
            hauteur: hauteur
        });

        window.location.href = "paiement.html?" + params.toString();
    };
}
</script>

</body>
</html>
